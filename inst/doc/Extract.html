<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="David Gerbing" />


<title>Subset a Data Frame</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Subset a Data Frame</h1>
<h4 class="author">David Gerbing</h4>


<div id="TOC">
<ul>
<li><a href="#subset-a-data-frame-with-base-r-extract">Subset a Data Frame with <strong>Base R</strong> <code>Extract[]</code></a></li>
<li><a href="#annoying-features-of-base-r-extract">Annoying Features of <strong>Base R</strong> <code>Extract</code></a></li>
<li><a href="#more-flexible-use-of-extract">More Flexible Use of <code>Extract[]</code></a></li>
<li><a href="#missing-data">Missing Data</a></li>
<li><a href="#random-selection-of-rows">Random Selection of Rows</a></li>
</ul>
</div>

<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;lessR&quot;</span>)</span></code></pre></div>
<div id="subset-a-data-frame-with-base-r-extract" class="section level2">
<h2>Subset a Data Frame with <strong>Base R</strong> <code>Extract[]</code></h2>
<p>The most general way to subset a data frame by rows and/or columns is the base R <code>Extract[]</code> function, indicated by double square brackets instead of the usual matched parentheses. For a data frame named <em>d</em> the general format is <code>d[rows, columms]</code>.</p>
<p>For the <code>rows</code> parameter, pass either</p>
<ul>
<li>the row names of the selected rows, the indices such as 1, 2, etc., or actual row names</li>
<li>a logical statement that, when evaluated, reduces to the row indices</li>
</ul>
<p>To specify a logical expression for the <code>rows</code> parameter, use the standard R operators.</p>
<table>
<thead>
<tr class="header">
<th>operator</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&amp;</td>
<td>and</td>
</tr>
<tr class="even">
<td>|</td>
<td>or</td>
</tr>
<tr class="odd">
<td>!</td>
<td>not</td>
</tr>
<tr class="even">
<td>==</td>
<td>is equal to</td>
</tr>
<tr class="odd">
<td>!=</td>
<td>is not equal to</td>
</tr>
<tr class="even">
<td>%in%</td>
<td>is in a vector</td>
</tr>
</tbody>
</table>
<p>For example, to obtain a subset of the data frame that consists of only those who report a value of the <em>Gender</em> variable as Female, specify a logical condition such as</p>
<pre><code>Gender==&quot;Female&quot;</code></pre>
<p>For the <code>cols</code> parameter, pass either</p>
<ul>
<li>the column indices of the selected columns</li>
<li>a list of variable names that reduces to the column indices</li>
</ul>
<p>If subsetting is to be done by only rows or only columns, then leave the other value blank. For example, to subset the <em>d</em> data frame only by rows, the general form reduces to <code>d[rows,]</code>. Similarly, to subset only by columns, <code>d[,cols]</code>.</p>
</div>
<div id="annoying-features-of-base-r-extract" class="section level2">
<h2>Annoying Features of <strong>Base R</strong> <code>Extract</code></h2>
<p>When <code>Extract[]</code> evaluates the row or column specifications to obtain the indices, there are several annoying properties.</p>
<ol style="list-style-type: decimal">
<li><code>rows</code>: Any reference to the variables in the data frame for this specification must contain the name of the data frame followed by a $. But this name has already been specified in the call to <code>Extract[]</code> by listing the data frame name in front of the square brackets, so now is redundant, repeated for every variable reference.</li>
<li><code>cols</code>: Usually specified with a vector of variable names.</li>
</ol>
<ul>
<li>All variable names in in the provided vector of names must be quoted.</li>
<li>No variable ranges specified with a colon <code>:</code> such as m01:m10 to specify 10 variables: m01, m02, …, up to m10.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>No character strings that store the values passed to <code>rows</code> and <code>cols</code>. Instead directly enter the conditions for both rows and columns, which can make the entire expression quite large.</li>
<li>When specifying a value of a variable for a row selection, any missing values for the variable are also provided even though the missing data values are not the requested value of the variable.</li>
</ol>
</div>
<div id="more-flexible-use-of-extract" class="section level2">
<h2>More Flexible Use of <code>Extract[]</code></h2>
<p>To address the first two deficiencies, one possibility is the base R <code>subset()</code> function. To address all three deficiencies and still use <code>Extract[]</code> directly, <strong>lessR</strong> provides the function <code>.()</code> for obtaining the indices of selected rows and of selected columns. This function is only callable within the base R <code>Extract[]</code> function, with what R refers to as non-standard evaluation. That basically means that the annoying restrictions are removed, though in some advanced programming uses the <code>.()</code> may not apply.</p>
<p>The general form of the subsetting follows with the <code>.()</code> function follows.</p>
<pre><code>d[.(rows), .(columns)]</code></pre>
<p>That is, call the same <code>Extract[]</code> function with reference to <code>rows</code> and <code>cols</code>, but now wrap the row and column expressions with the <strong>lessR</strong> function call <code>.()</code>.</p>
<p>To illustrate, use the Employee data set contained in <strong>lessR</strong>, here read into the <em>d</em> data frame.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">Read</span>(<span class="st">&quot;Employee&quot;</span>)</span></code></pre></div>
<pre><code>## 
## &gt;&gt;&gt; Suggestions
## Details about your data, Enter:  details()  for d, or  details(name)
## 
## Data Types
## ------------------------------------------------------------
## character: Non-numeric data values
## integer: Numeric data values, integers only
## double: Numeric data values with decimal digits
## ------------------------------------------------------------
## 
##     Variable                  Missing  Unique 
##         Name     Type  Values  Values  Values   First and last values
## ------------------------------------------------------------------------------------------
##  1     Years   integer     36       1      16   7  NA  15 ... 1  2  10
##  2    Gender character     37       0       2   M  M  M ... F  F  M
##  3      Dept character     36       1       5   ADMN  SALE  SALE ... MKTG  SALE  FINC
##  4    Salary    double     37       0      37   53788.26  94494.58 ... 56508.32  57562.36
##  5    JobSat character     35       2       3   med  low  low ... high  low  high
##  6      Plan   integer     37       0       3   1  1  3 ... 2  2  1
##  7       Pre   integer     37       0      27   82  62  96 ... 83  59  80
##  8      Post   integer     37       0      22   92  74  97 ... 90  71  87
## ------------------------------------------------------------------------------------------</code></pre>
<p>Subset the data frame by only listing observations with a <em>Gender</em> of “M” with scores on <em>Post</em> larger than 90. Only list columns for the variables in the range from <em>Years</em> to <em>Salary</em>, and <em>Post</em>. Referring back to the output of <code>Read()</code>, the variable range includes <em>Years</em>, <em>Gender</em>, <em>Dept</em>, and <em>Salary</em>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>d[.(Gender<span class="sc">==</span><span class="st">&quot;M&quot;</span> <span class="sc">&amp;</span> Post<span class="sc">&gt;</span><span class="dv">90</span>), .(Years<span class="sc">:</span>Salary, Post)]</span></code></pre></div>
<pre><code>##                   Years Gender Dept    Salary Post
## Ritchie, Darnell      7      M ADMN  53788.26   92
## Hoang, Binh          15      M SALE 111074.86   97
## Pham, Scott          13      M SALE  81871.05   94
## Correll, Trevon      21      M SALE 134419.23   94
## Langston, Matthew     5      M SALE  49188.96   93
## Anderson, David       9      M ACCT  69547.60   91</code></pre>
<p>Following is the traditional R call to <code>Extract[]</code> to obtain the same subsetting.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>d[d<span class="sc">$</span>Gender<span class="sc">==</span><span class="st">&quot;M&quot;</span> <span class="sc">&amp;</span> d<span class="sc">$</span>Post<span class="sc">&gt;</span><span class="dv">90</span>, <span class="fu">c</span>(<span class="st">&quot;Years&quot;</span>, <span class="st">&quot;Gender&quot;</span>, <span class="st">&quot;Dept&quot;</span>, <span class="st">&quot;Salary&quot;</span>, <span class="st">&quot;Post&quot;</span>)]</span></code></pre></div>
<pre><code>##                   Years Gender Dept    Salary Post
## Ritchie, Darnell      7      M ADMN  53788.26   92
## Hoang, Binh          15      M SALE 111074.86   97
## Pham, Scott          13      M SALE  81871.05   94
## Correll, Trevon      21      M SALE 134419.23   94
## Langston, Matthew     5      M SALE  49188.96   93
## Anderson, David       9      M ACCT  69547.60   91</code></pre>
<p>A row selection is a logical condition. To negate a row selection, add a <code>!</code> to the beginning of the condition passed to <code>.()</code>, within the call to <code>.()</code>. To exclude the specified variables, place a <code>-</code>, in front of the call to <code>.()</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>d[.(<span class="sc">!</span>(Gender<span class="sc">==</span><span class="st">&quot;M&quot;</span> <span class="sc">&amp;</span> Post<span class="sc">&gt;</span><span class="dv">90</span>)), <span class="sc">-</span>.(Dept<span class="sc">:</span>Plan, Pre)]</span></code></pre></div>
<pre><code>##                     Years Gender Post
## Wu, James              NA      M   74
## Jones, Alissa           5      F   62
## Downs, Deborah          7      F   86
## Afshari, Anbar          6      F  100
## Knox, Michael          18      M   84
## Campagna, Justin        8      M   84
## Kimball, Claire         8      F   92
## Cooper, Lindsay         4      F   91
## Saechao, Suzanne        8      F  100
## Tian, Fang              9      F   61
## Bellingar, Samantha    10      F   72
## Sheppard, Cory         14      M   73
## Kralik, Laura          10      F   71
## Skrotzki, Sara         18      F   61
## James, Leslie          18      F   70
## Osterman, Pascal        5      M   70
## Adib, Hassan           14      M   69
## Gvakharia, Kimberly     3      F   79
## Stanley, Grayson        9      M   73
## Link, Thomas           10      M   83
## Portlock, Ryan         13      M   73
## Stanley, Emma           3      F   84
## Singh, Niral            2      F   59
## Fulton, Scott          13      M   73
## Korhalkar, Jessica      2      F   87
## LaRoe, Maria           10      F   86
## Billing, Susan          4      F   90
## Capelle, Adam          24      M   81
## Hamide, Bita            1      F   90
## Anastasiou, Crystal     2      F   71
## Cassinelli, Anastis    10      M   87</code></pre>
<p>Can still provide the indices directly for one or both of the expressions as the base R <code>Extract[]</code> function is unmodified with the use of <code>.()</code>. The purpose of <code>.()</code> is simply to return the row or column row indices to identify specific rows or columns of the specified data frame. You can either specify the indices directory for the rows or columns, or let <code>.()</code> identify them for you.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>d[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, .(Years<span class="sc">:</span>Salary, Post)]</span></code></pre></div>
<pre><code>##                  Years Gender Dept    Salary Post
## Ritchie, Darnell     7      M ADMN  53788.26   92
## Wu, James           NA      M SALE  94494.58   74
## Hoang, Binh         15      M SALE 111074.86   97</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>d[.(Gender<span class="sc">==</span><span class="st">&quot;M&quot;</span> <span class="sc">&amp;</span> Post<span class="sc">&gt;</span><span class="dv">90</span>), <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>##                   Years Gender Dept
## Ritchie, Darnell      7      M ADMN
## Hoang, Binh          15      M SALE
## Pham, Scott          13      M SALE
## Correll, Trevon      21      M SALE
## Langston, Matthew     5      M SALE
## Anderson, David       9      M ACCT</code></pre>
<p>To enhance readability, can store the specified row or column conditions as character strings. Each string must be named either <code>rows</code> or <code>cols</code>. Because the entire expression for <code>rows</code> or <code>cols</code> is a character string, differentiate between single and double quotes as needed. For example, use single quotes within the string and double quotes to define the entire string, illustrated here.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>rows <span class="ot">&lt;-</span> <span class="st">&quot;Gender==&#39;M&#39; &amp; Post&gt;93&quot;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="st">&quot;Gender:Salary, Post&quot;</span></span></code></pre></div>
<p>To subset, pass the respective character strings, <code>rows</code> and <code>cols</code>, to <code>.()</code>, respectively.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>d[.(rows), .(cols)]</span></code></pre></div>
<pre><code>##                 Gender Dept    Salary Post
## Hoang, Binh          M SALE 111074.86   97
## Pham, Scott          M SALE  81871.05   94
## Correll, Trevon      M SALE 134419.23   94</code></pre>
<p>To negate, as with the literal expressions, use <code>!</code> for the logical expression that defines the rows and <code>-</code> for the columns. Notice their placement, where the <code>!</code> is inside the call to <code>.()</code>, and the <code>-</code> is outside the call.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>d[.(<span class="sc">!</span>rows), <span class="sc">-</span>.(cols)]</span></code></pre></div>
<pre><code>##                     Years JobSat Plan Pre
## Ritchie, Darnell        7    med    1  82
## Wu, James              NA    low    1  62
## Jones, Alissa           5   &lt;NA&gt;    1  65
## Downs, Deborah          7   high    2  90
## Afshari, Anbar          6   high    2 100
## Knox, Michael          18    med    3  81
## Campagna, Justin        8    low    1  76
## Kimball, Claire         8   high    2  93
## Cooper, Lindsay         4   high    1  78
## Saechao, Suzanne        8    med    1  98
## Tian, Fang              9    med    2  60
## Bellingar, Samantha    10    med    1  67
## Sheppard, Cory         14    low    3  66
## Kralik, Laura          10    med    2  74
## Skrotzki, Sara         18    med    2  63
## James, Leslie          18    low    3  70
## Osterman, Pascal        5   high    3  69
## Adib, Hassan           14    med    2  71
## Gvakharia, Kimberly     3    med    2  83
## Stanley, Grayson        9    low    1  74
## Link, Thomas           10    low    1  83
## Portlock, Ryan         13    low    1  72
## Langston, Matthew       5    low    3  94
## Stanley, Emma           3   high    2  86
## Singh, Niral            2   high    2  59
## Anderson, David         9    low    1  94
## Fulton, Scott          13    low    1  72
## Korhalkar, Jessica      2   &lt;NA&gt;    2  74
## LaRoe, Maria           10   high    2  80
## Billing, Susan          4    med    2  91
## Capelle, Adam          24    med    2  83
## Hamide, Bita            1   high    2  83
## Anastasiou, Crystal     2    low    2  59
## Cassinelli, Anastis    10   high    1  80</code></pre>
</div>
<div id="missing-data" class="section level2">
<h2>Missing Data</h2>
<p>The variable <em>Dept</em> is missing for the fourth row of data.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>d[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span></code></pre></div>
<pre><code>##                  Years Gender Dept    Salary JobSat Plan Pre Post
## Ritchie, Darnell     7      M ADMN  53788.26    med    1  82   92
## Wu, James           NA      M SALE  94494.58    low    1  62   74
## Hoang, Binh         15      M SALE 111074.86    low    3  96   97
## Jones, Alissa        5      F &lt;NA&gt;  53772.58   &lt;NA&gt;    1  65   62
## Downs, Deborah       7      F FINC  57139.90   high    2  90   86</code></pre>
<p>Here with the traditional use of <code>Extract[]</code>, specify rows of data only when the value of <em>Dept</em> is <em>ADMN</em>.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>d[d<span class="sc">$</span>Dept<span class="sc">==</span><span class="st">&quot;ADMN&quot;</span>, <span class="fu">c</span>(<span class="st">&#39;Gender&#39;</span>, <span class="st">&#39;Dept&#39;</span>, <span class="st">&#39;Salary&#39;</span>)]</span></code></pre></div>
<pre><code>##                  Gender Dept    Salary
## Ritchie, Darnell      M ADMN  53788.26
## NA                 &lt;NA&gt; &lt;NA&gt;        NA
## Afshari, Anbar        F ADMN  69441.93
## James, Leslie         F ADMN 122563.38
## Singh, Niral          F ADMN  61055.44
## Billing, Susan        F ADMN  72675.26
## Capelle, Adam         M ADMN 108138.43</code></pre>
<p>The result provides what is requested, and also when <em>Dept</em> is <code>&lt;NA&gt;</code>, which is not requested. The requested value of <em>ADMN</em> is not the same as <code>&lt;NA&gt;</code>.</p>
<p>Use the <code>.()</code> function to obtain what is requested, rows of data in which the value of <em>Dept</em> is <em>ADMN</em>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>d[.(Dept<span class="sc">==</span><span class="st">&quot;ADMN&quot;</span>), .(Gender<span class="sc">:</span>Salary)]</span></code></pre></div>
<pre><code>##                  Gender Dept    Salary
## Ritchie, Darnell      M ADMN  53788.26
## Afshari, Anbar        F ADMN  69441.93
## James, Leslie         F ADMN 122563.38
## Singh, Niral          F ADMN  61055.44
## Billing, Susan        F ADMN  72675.26
## Capelle, Adam         M ADMN 108138.43</code></pre>
</div>
<div id="random-selection-of-rows" class="section level2">
<h2>Random Selection of Rows</h2>
<p>The function <code>.()</code> also provides for random selection of rows. To randomly select the specified number of rows from the data frame to subset, specify the <code>random()</code> function for the logical criterion of the <code>rows</code>. The value passed to <code>random()</code> can either be the actual number of rows to select, or the proportion of rows to select.</p>
<p>Here randomly select five rows of data from the <em>d</em> data frame.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>d[.(<span class="fu">random</span>(<span class="dv">5</span>)), .(Years<span class="sc">:</span>Salary)]</span></code></pre></div>
<pre><code>##                 Years Gender Dept    Salary
## Correll, Trevon    21      M SALE 134419.23
## Capelle, Adam      24      M ADMN 108138.43
## Cooper, Lindsay     4      F MKTG  56772.95
## Sheppard, Cory     14      M FINC  95027.55
## Jones, Alissa       5      F &lt;NA&gt;  53772.58</code></pre>
<p>Here specify a proportion of rows to select.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>d[.(<span class="fu">random</span>(<span class="fl">0.1</span>)), .(Years<span class="sc">:</span>Salary)]</span></code></pre></div>
<pre><code>##                     Years Gender Dept   Salary
## Kimball, Claire         8      F MKTG 61356.69
## Portlock, Ryan         13      M SALE 77714.85
## Fulton, Scott          13      M SALE 87785.51
## Gvakharia, Kimberly     3      F SALE 49868.68</code></pre>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
